DELIMITER ;; --VAccines
CREATE PROCEDURE GET_VACCINES()
BEGIN
    SELECT * FROM vaccine;
END ;;
DELIMITER ;

DELIMITER ;;

CREATE PROCEDURE GET_VACCINES( IN id INT)
BEGIN
    SELECT * FROM vaccine WHERE id_vaccine = id;
END;;
DELIMITER ;

DELIMITER ;;

CREATE PROCEDURE CREATE_VACCINE(IN vaccine_name VARCHAR(16), IN vaccine_desc TEXT)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        SELECT "HA OCURRIDO UN ERROR" AS MESSAGE;
        ROLLBACK;
    END;

    START TRANSACTION;
    
    BEGIN
        INSERT INTO vaccine VALUES(null, normalizeText(vaccine_name), normalizeText(vaccine_desc));
        COMMIT;
    END;
END;;

DELIMITER ;

DROP PROCEDURE IF EXISTS UPDATE_VACCINE;

DELIMITER ;;

CREATE PROCEDURE UPDATE_VACCINE(IN id_vaccine INT, IN vaccine_name VARCHAR(16), IN vaccine_desc TEXT)
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        GET DIAGNOSTICS CONDITION 1 @P1 = RETURNED_SQLSTATE, @P2 = MESSAGE_TEXT;
        SELECT @P2 AS MESSAGE;
        ROLLBACK;
    END;

    START TRANSACTION;  
    BEGIN
        --TERMINAR PROCEDIMIENTO
    END;
END ;;

DELIMITER ;
--vacine inventory cow-vaccine medic-history
